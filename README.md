# EchoTalk Presence Worker

Модуль отвечает за определение того, какое приложение или игра сейчас активно у пользователя.  
Это используется для отображения статуса — например: **"играет в Dota 2"** или **"работает в Visual Studio Code"**.

---

## Как работает логика

- **Опрос активного окна**  
  Каждую секунду проверяется текущее активное окно через системный API.

- **Классификация приложения**  
  Определяется, что это за процесс:
  - *игра* (известные exe или путь содержит подсказки типа `steamapps/common`);
  - *гиковский софт* (IDE, консоли, тулзы);
  - *другое*.

- **Резолвер имён**  
  Преобразует `exe` или путь в красивое название:
  1. проверка заранее известных exe → названий;
  2. поиск в локальном кеше;
  3. чтение библиотек Steam/Epic (названия игр);
  4. системные источники:
     - Windows: `FileDescription` через PowerShell,
     - macOS: `Info.plist` внутри `.app`,
     - Linux: `.desktop` файлы;
  5. заголовок окна (fallback);
  6. базовое имя файла, если ничего не нашлось.

- **События**  
  - `presence:update` — начало новой активности;  
  - `presence:heartbeat` — подтверждение, что активность ещё продолжается;  
  - `presence:ended` — завершение активности.

---

## Какие данные собираются

- путь и имя активного exe;  
- заголовок окна (только если нужен fallback);  
- техническая информация процесса (pid, название приложения от ОС).  

⚠️ **Что НЕ собирается:**  
- никакие пользовательские документы, файлы или переписки;  
- содержимое окон;  
- интернет-трафик.  

Единственное, что дополнительно читается — это **манифесты Steam/Epic** для определения имён игр.

---

## Для чего это нужно

- отображение статуса активности в профиле;  
- возможность показывать, во что играет или над чем работает пользователь;  
- разделение игровых и рабочих приложений.

---

## Дисклеймер

Этот модуль **не крадёт личные данные** и **не отправляет приватную информацию**.  
Он выполняет только техническую задачу: сопоставить активный процесс с понятным названием, чтобы показать корректный статус пользователю или его друзьям.

---
